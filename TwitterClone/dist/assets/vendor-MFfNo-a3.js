const F=(t,e)=>t===e,b={equals:F};let y=k;const a=1,g=2,O={owned:null,cleanups:null,context:null,owner:null};var i=null;let A=null,I=null,u=null,o=null,f=null,E=0;function _(t,e){const s=u,r=i,n=t.length===0,l=e===void 0?r:e,c=n?O:{owned:null,cleanups:null,context:l?l.context:null,owner:l},T=n?t:()=>t(()=>m(()=>p(c)));i=c,u=null;try{return w(T,!0)}finally{u=s,i=r}}function G(t,e){e=e?Object.assign({},b,e):b;const s={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=n=>(typeof n=="function"&&(n=n(s.value)),U(s,n));return[C.bind(s),r]}function P(t,e,s){const r=x(t,e,!1,a);h(r)}function L(t,e,s){y=j;const r=x(t,e,!1,a);r.user=!0,f?f.push(r):h(r)}function Q(t,e,s){s=s?Object.assign({},b,s):b;const r=x(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=s.equals||void 0,h(r),C.bind(r)}function m(t){if(u===null)return t();const e=u;u=null;try{return t()}finally{u=e}}function W(t){L(()=>m(t))}function C(){if(this.sources&&this.state)if(this.state===a)h(this);else{const t=o;o=null,w(()=>S(this),!1),o=t}if(u){const t=this.observers?this.observers.length:0;u.sources?(u.sources.push(this),u.sourceSlots.push(t)):(u.sources=[this],u.sourceSlots=[t]),this.observers?(this.observers.push(u),this.observerSlots.push(u.sources.length-1)):(this.observers=[u],this.observerSlots=[u.sources.length-1])}return this.value}function U(t,e,s){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&w(()=>{for(let n=0;n<t.observers.length;n+=1){const l=t.observers[n],c=A&&A.running;c&&A.disposed.has(l),(c?!l.tState:!l.state)&&(l.pure?o.push(l):f.push(l),l.observers&&D(l)),c||(l.state=a)}if(o.length>1e6)throw o=[],new Error},!1)),e}function h(t){if(!t.fn)return;p(t);const e=E;R(t,t.value,e)}function R(t,e,s){let r;const n=i,l=u;u=i=t;try{r=t.fn(e)}catch(c){return t.pure&&(t.state=a,t.owned&&t.owned.forEach(p),t.owned=null),t.updatedAt=s+1,N(c)}finally{u=l,i=n}(!t.updatedAt||t.updatedAt<=s)&&(t.updatedAt!=null&&"observers"in t?U(t,r):t.value=r,t.updatedAt=s)}function x(t,e,s,r=a,n){const l={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:i,context:i?i.context:null,pure:s};return i===null||i!==O&&(i.owned?i.owned.push(l):i.owned=[l]),l}function v(t){if(t.state===0)return;if(t.state===g)return S(t);if(t.suspense&&m(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<E);)t.state&&e.push(t);for(let s=e.length-1;s>=0;s--)if(t=e[s],t.state===a)h(t);else if(t.state===g){const r=o;o=null,w(()=>S(t,e[0]),!1),o=r}}function w(t,e){if(o)return t();let s=!1;e||(o=[]),f?s=!0:f=[],E++;try{const r=t();return V(s),r}catch(r){s||(f=null),o=null,N(r)}}function V(t){if(o&&(k(o),o=null),t)return;const e=f;f=null,e.length&&w(()=>y(e),!1)}function k(t){for(let e=0;e<t.length;e++)v(t[e])}function j(t){let e,s=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[s++]=r:v(r)}for(e=0;e<s;e++)v(t[e])}function S(t,e){t.state=0;for(let s=0;s<t.sources.length;s+=1){const r=t.sources[s];if(r.sources){const n=r.state;n===a?r!==e&&(!r.updatedAt||r.updatedAt<E)&&v(r):n===g&&S(r,e)}}}function D(t){for(let e=0;e<t.observers.length;e+=1){const s=t.observers[e];s.state||(s.state=g,s.pure?o.push(s):f.push(s),s.observers&&D(s))}}function p(t){let e;if(t.sources)for(;t.sources.length;){const s=t.sources.pop(),r=t.sourceSlots.pop(),n=s.observers;if(n&&n.length){const l=n.pop(),c=s.observerSlots.pop();r<n.length&&(l.sourceSlots[c]=r,n[r]=l,s.observerSlots[r]=c)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)p(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)p(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function M(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function N(t,e=i){throw M(t)}function q(t,e){return m(()=>t(e||{}))}export{P as a,Q as b,_ as c,G as d,q as e,W as o};
//# sourceMappingURL=vendor-MFfNo-a3.js.map
